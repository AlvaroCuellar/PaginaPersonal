<!-- ·········································
      PRESS SECTION
      ········································· -->
<section id="press" class="press scrollto">
  <div class="row clearfix">
    {% assign lang = page.lang | default: 'es' %}
    <div class="col-1">
      <div class="section-heading">
        {% if site.data.home.press.subtitle[lang] %}
          <h3>{{ site.data.home.press.subtitle[lang] }}</h3>
        {% endif %}
        <h2 class="section-title">
          {{ site.data.home.press.section_title[lang] }}
          <span class="section-count">{{ site.data.home.press.articles.size }}</span>
        </h2>
      </div>
      
      <!-- Press Carousel Container -->
      <div class="press-carousel-container">
        <!-- Carousel Wrapper (para overflow hidden) -->
        <div class="press-carousel-wrapper">
          <div class="press-carousel">
            {% comment %} Construir arrays de featured y regular articles {% endcomment %}
            {% assign featured_ids = site.data.home.press.featured | default: empty %}
            {% assign featured_articles = "" | split: "" %}
            {% assign regular_articles = "" | split: "" %}
            
            {% comment %} Primero, agregar featured articles en el orden especificado {% endcomment %}
            {% for featured_id in featured_ids %}
              {% assign article = site.data.home.press.articles | where: "id", featured_id | first %}
              {% if article %}
                {% assign featured_articles = featured_articles | push: article %}
              {% endif %}
            {% endfor %}
            
            {% comment %} Luego, agregar artículos regulares ordenados por fecha {% endcomment %}
            {% for article in site.data.home.press.articles %}
              {% unless featured_ids contains article.id %}
                {% assign regular_articles = regular_articles | push: article %}
              {% endunless %}
            {% endfor %}
            {% assign regular_articles = regular_articles | sort: "date" | reverse %}
            
            {% comment %} Concatenar featured + regular {% endcomment %}
            {% assign sorted_articles = featured_articles | concat: regular_articles %}
            
            {% for article in sorted_articles %}
              {% assign is_featured = false %}
              {% if featured_ids contains article.id %}
                {% assign is_featured = true %}
              {% endif %}
              <div class="press-card{% if is_featured %} press-card-featured{% endif %}" data-index="{{ forloop.index0 }}">
                <!-- Article Image -->
                <div class="press-image">
                  {% if article.thumbnail %}
                    <img src="{{ article.thumbnail }}" alt="{{ article.title[lang] }}" loading="lazy">
                  {% else %}
                    <div class="press-image-placeholder">
                      <i class="fa fa-newspaper-o"></i>
                    </div>
                  {% endif %}
                  
                  <!-- Featured Badge (top right) -->
                  {% if is_featured %}
                    <div class="featured-badge featured-badge-absolute featured-badge-top-right">
                      <i class="fa fa-star"></i>
                      <span>{{ site.data.i18n[lang].featured_label }}</span>
                    </div>
                  {% endif %}
                  
                  <!-- Type Badge (top left) -->
                  <div class="press-type-badge">
                    {% case article.type %}
                      {% when 'interview' %}
                        <i class="fa-solid fa-microphone"></i>
                      {% when 'news' %}
                        <i class="fa-solid fa-newspaper"></i>
                      {% when 'tv' %}
                        <i class="fa-solid fa-tv"></i>
                      {% when 'critic' %}
                        <i class="fa-solid fa-star-half-stroke"></i>
                      {% when 'award' %}
                        <i class="fa-solid fa-trophy"></i>
                      {% else %}
                        <i class="fa fa-file-text" aria-hidden="true"></i>
                    {% endcase %}
                  </div>
                </div>
                
                <!-- Article Content -->
                <div class="press-content">
                  <div class="press-header">
                    <div class="press-outlet">{{ article.outlet }}</div>
                    <div class="press-date">
                      {% assign date = article.date | date: "%-d" %}
                      {% assign month = article.date | date: "%B" | downcase %}
                      {% assign year = article.date | date: "%Y" %}
                      {% assign translated_month = site.data.i18n[lang].months[month] %}
                      {{ date }} {{ translated_month | default: month | capitalize }} {{ year }}
                    </div>
                  </div>
                  
                  <h3 class="press-title">{{ article.title[lang] }}</h3>
                  
                  {% if article.summary[lang] %}
                    <p class="press-summary">{{ article.summary[lang] }}</p>
                  {% endif %}
                  
                  <div class="press-button">
                    <a href="{{ article.url }}" target="_blank" rel="noopener noreferrer" class="button-inverse no-icon">
                      {% if lang == 'es' %}Leer artículo{% else %}Read article{% endif %}
                    </a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
        
        <!-- Navigation Arrows -->
        <button class="carousel-arrow carousel-prev" aria-label="Previous">
          <i class="fa fa-chevron-left"></i>
        </button>
        <button class="carousel-arrow carousel-next" aria-label="Next">
          <i class="fa fa-chevron-right"></i>
        </button>
        
        <!-- Carousel Indicators (dots) -->
        <div class="carousel-indicators"></div>
      </div>
    </div>
  </div>
</section>
<!--End of Press-->