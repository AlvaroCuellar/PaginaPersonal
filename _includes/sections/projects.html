<section id="projects" class="projects scrollto">
  <div class="row clearfix">
    {% assign lang = page.lang | default: 'es' %}
    <div class="col-1">
      <div class="section-heading">
        {% if site.data.home.projects.subtitle[lang] %}
          <h3>{{ site.data.home.projects.subtitle[lang] }}</h3>
        {% endif %}
        <h2 class="section-title">{{ site.data.home.projects.section_title[lang] }}</h2>
      </div>

      <!-- Projects Container -->
      <div id="projects-container">
        {% for project in site.data.home.projects.projects %}
          {% assign is_even = forloop.index | modulo: 2 %}
          <div class="hero-project project-item{% if forloop.index > 5 %} hidden{% endif %}{% if is_even == 0 %} reverse{% endif %}" data-project="{{ forloop.index }}">
            <div class="hero-project__image"
              style="background-image: url({{ '/assets/images/projects/' | append: project.image | relative_url }});">
            </div>
            <div class="hero-project__content">
              <span class="hero-project__badge">{{ project.badge[lang] }}</span>
              <h3 class="hero-project__title">{{ project.title[lang] }}</h3>
              <p class="hero-project__description">
                {{ project.description[lang] }}
              </p>
              {% if project.url %}
                <div class="hero-project__links">
                  <a href="{{ project.url }}" class="button no-icon" target="_blank">{{ site.data.i18n[lang].project_button | default: 'Ver proyecto' }}</a>
                </div>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- Show More Button -->
      {% if site.data.home.projects.projects.size > 5 %}
        <div class="show-more-container" style="text-align: center; margin-top: var(--spacing-xl);">
          <button id="show-more-projects" class="button no-icon">{{ site.data.i18n[lang].show_more_projects | default: 'Ver más proyectos' }}</button>
        </div>
      {% endif %}

    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const showMoreBtn = document.getElementById('show-more-projects');
      const projects = document.querySelectorAll('.project-item');
      let currentlyShown = 5;
      let isExpanded = false;
      
      // Textos del botón según idioma
      const showMoreText = '{{ site.data.i18n[lang].show_more_projects | default: "Ver más proyectos" }}';
      const showLessText = '{{ site.data.i18n[lang].show_less_projects | default: "Ver menos proyectos" }}';
      
      if (showMoreBtn) {
        showMoreBtn.addEventListener('click', function() {
          if (!isExpanded) {
            // Mostrar todos los proyectos
            for (let i = 5; i < projects.length; i++) {
              projects[i].classList.remove('hidden');
            }
            showMoreBtn.textContent = showLessText;
            isExpanded = true;
          } else {
            // Ocultar proyectos extras (mostrar solo los primeros 5)
            for (let i = 5; i < projects.length; i++) {
              projects[i].classList.add('hidden');
            }
            showMoreBtn.textContent = showMoreText;
            isExpanded = false;
            
            // Scroll suave a la sección de proyectos
            document.getElementById('projects').scrollIntoView({ 
              behavior: 'smooth', 
              block: 'start' 
            });
          }
        });
      }
    });
  </script>
</section>