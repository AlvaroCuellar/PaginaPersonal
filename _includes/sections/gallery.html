<section id="gallery" class="gallery scrollto">

  <div class="row clearfix">
    <div class="col-1">
      <div class="section-heading">
        {% if site.data.home.gallery.subtitle[page.lang] %}
          <h3>{{ site.data.home.gallery.subtitle[page.lang] }}</h3>
        {% endif %}
        <h2 class="section-title">{{ site.data.home.gallery.section_title[page.lang] }}</h2>
      </div>

      {% for item in site.data.home.gallery.items %}
        {% assign item_index = forloop.index0 %}
        
        <!-- Gallery Hero Item -->
        <div class="gallery-hero{% if item.layout == 'reverse' %} reverse{% endif %}">
          <div class="gallery-slider" onclick="openGalleryModal({{ item_index }})">
            <!-- Las imágenes se cargarán automáticamente -->
          </div>
          <div class="gallery-info">
            <h3>{{ item.title[page.lang] }}</h3>
            {% if item.highlights and item.highlights.size > 0 %}
              <p>
              {% for highlight in item.highlights %}
                {% if highlight.label and highlight.content %}
                  <b>{{ highlight.label[page.lang] }}:</b> 
                  {% if highlight.content[page.lang] %}
                    {{ highlight.content[page.lang] }}
                  {% else %}
                    {{ highlight.content }}
                  {% endif %}
                  {% unless forloop.last %}<br>{% endunless %}
                {% endif %}
              {% endfor %}
              </p>
            {% endif %}
            <p>{{ item.description[page.lang] }}</p>
          </div>
        </div>

        <!-- Modal para cada item -->
        <div id="galleryModal{{ item_index }}" class="gallery-modal" onclick="closeGalleryModal({{ item_index }}, event)">
          <span class="close-modal" onclick="closeGalleryModal({{ item_index }}, event)">&times;</span>
          <div class="modal-carousel">
            <!-- Las imágenes se cargarán automáticamente -->
            <button class="modal-prev" onclick="galleryModalPrev({{ item_index }}, event)"></button>
            <button class="modal-next" onclick="galleryModalNext({{ item_index }}, event)"></button>
            <div class="modal-indicators">
              <span class="modal-counter">1 / 1</span>
              <div class="modal-dots">
                <!-- Los dots se cargarán automáticamente -->
              </div>
            </div>
          </div>
        </div>
      {% endfor %}

    </div><!-- .col-1 -->
  </div><!-- .row -->

  <!-- Script para inyectar datos de la galería en JavaScript -->
  <script>
    window.galleryData = [
      {% for item in site.data.home.gallery.items %}
      {
        images_folder: "{{ item.images_folder }}",
        images_prefix: "{{ item.images_prefix }}",
        images_extension: "{{ item.images_extension }}",
        title: "{{ item.title[page.lang] | escape }}"
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ];
  </script>

</section>
